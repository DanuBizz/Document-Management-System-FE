<!-- Container to utilize data once data$ has been fetched -->
<ng-container *ngIf="data$ | async as data">
  <div class="container">
    <!-- Title -->
    <h1 class="text-center mobile-title">{{ title }}</h1>

    <mat-selection-list #documents class="mat-selection-list-container mat-elevation-z10">
      <!-- Progress bar: displayed while data is being fetched -->
      <mat-progress-bar mode="indeterminate" *ngIf="data.isLoading" color="primary"></mat-progress-bar>

      @for (document of data.documents; track document) {
        <mat-list-option>
          <button (click)="openDocumentInBrowser(document.id)" class="link-button">
            <span class="border-bottom">{{ document.documentName }}</span>
          </button>
        </mat-list-option>
        <mat-divider></mat-divider>
      }
    </mat-selection-list>

    <p class="text-center my-4">Dokumente bestätigt: {{ documents.selectedOptions.selected.length }}</p>

    <!-- Buttons for actions -->
    <div class="d-flex justify-content-center my-3">
      <button
        mat-raised-button
        color="primary"
        [disabled]="documents.selectedOptions.selected.length < data.documents.length || data.isLoading">
        Weiter
      </button>
    </div>

    <div class="d-flex flex-column justify-content-center align-items-center text-area">
      <p class="text-center">
        Erst wenn alle Dokumente gelesen und akzeptiert wurden, können Sie auf 'Weiter' klicken.
      </p>
    </div>

    <!--
    &lt;!&ndash; scrolling container for the table &ndash;&gt;
    <div class="mat-elevation-z10 mb-2">
      <div class="scrolling-container">
        <table
          mat-table
          class="default-table-design"
          [dataSource]="data.documents"
          matSort
          (matSortChange)="changeSort($event)">

          &lt;!&ndash; Name column &ndash;&gt;
          <ng-container matColumnDef="documentName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let document">
              <button (click)="openDocumentInBrowser(document.id)" class="link-button">
                <span class="border-bottom">{{ document.documentName }}</span>
              </button>
            </td>
          </ng-container>

          &lt;!&ndash; Select column &ndash;&gt;
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
              <mat-icon>add_task</mat-icon>
            </th>
            <td mat-cell *matCellDef="let document">
              <mat-checkbox
                color="primary"
                [disabled]="data.isLoading"
                (change)="onToggleSelectDocument(document)"
                [checked]="selection.isSelected(document)"></mat-checkbox>
            </td>
          </ng-container>

          &lt;!&ndash; Header row definition &ndash;&gt;
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>

          &lt;!&ndash; Row definition &ndash;&gt;
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        </table>
      </div>

      &lt;!&ndash; Paginator &ndash;&gt;
      <mat-paginator
        class="default-paginator-design"
        [length]="data.totalElements"
        [pageSize]="queryParams.pageSize"
        [pageSizeOptions]="data.pageSizeOptions"
        [pageIndex]="queryParams.pageNumber"
        (page)="handlePageEvent($event)"
        [showFirstLastButtons]="true"
        aria-label="Select page of documents">
      </mat-paginator>
    </div>
    -->
  </div>
</ng-container>
